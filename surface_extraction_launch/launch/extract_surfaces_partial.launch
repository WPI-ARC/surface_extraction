<launch>
    <arg name="input_topic" />
    <arg name="new_indices" />
    <arg name="surfaces_manager_node" />

    <!-- Extract new points for visualization only -->
    <node pkg="nodelet" type="nodelet" name="publish_new" args="load pcl/ExtractIndices nodelet_manager">
    <!-- Topics -->
        <remap from="~input" to="$(arg input_topic)" />
        <remap from="~indices" to="$(arg new_indices)" />

        <!-- Params -->
        <param name="use_indices" value="true" />
    </node>


    <!--Expand Surfaces -->
    <node pkg="nodelet" type="nodelet" name="expand_surfaces" args="load surface_filters/ExpandSurfaces nodelet_manager">
        <!-- Topics -->
        <remap from="~input" to="$(arg input_topic)" />
        <remap from="~indices" to="$(arg new_indices)" />
        <remap from="~surfaces" to="$(arg surfaces_manager_node)/surfaces" />
    </node>

    <!-- Extract new points for visualization only -->
    <node pkg="nodelet" type="nodelet" name="publish_filtered" args="load pcl/ExtractIndices nodelet_manager">
        <!-- Topics -->
        <remap from="~input" to="$(arg input_topic)" />
        <remap from="~indices" to="expand_surfaces/filtered_indices" />

        <!-- Params -->
        <param name="use_indices" value="true" />
    </node>

    <!-- Extract new points for visualization only -->
    <node pkg="nodelet" type="nodelet" name="publish_removed" args="load pcl/ExtractIndices nodelet_manager">
        <!-- Topics -->
        <remap from="~input" to="$(arg input_topic)" />
        <remap from="~indices" to="expand_surfaces/removed_indices" />

        <!-- Params -->
        <param name="use_indices" value="true" />
    </node>


</launch>